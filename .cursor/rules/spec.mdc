---
description: 釐清核心功能需求
globs: 
alwaysApply: false
---
開發一個透過角色視角切換的對話介面，幫助使用者跳脫當局者迷的困境，啟動內在智慧解決問題。

## 核心概念

- **學徒視角**：帶著困惑尋求幫助的自己
- **導師視角**：以第三者角度提供建議的自己

## 功能需求

### 1. 對話介面

- 類似通訊軟體的聊天介面
- 訊息氣泡顯示：
  - 學徒視角時：自己的訊息在右側，導師訊息在左側
  - 導師視角時：自己的訊息在右側，學徒訊息在左側

### 2. 視角切換機制

- 視角切換按鈕
- 切換時觸發：
  - 10秒倒數計時（可跳過）
  - 畫面模糊效果
  - 視角切換提示文字

### 3. 訊息管理

- 每則訊息可編輯、刪除
- 支援匯出功能（Markdown、純文字格式）
- 使用 Local Storage 儲存對話記錄

## 使用流程

1. 使用者以學徒視角開始，輸入遇到的問題
2. 點擊切換按鈕，經過轉換動畫切換至導師視角
3. 以導師身份回應學徒的問題
4. 可持續在兩個視角間切換對話
5. 對話過程可隨時編輯或匯出

## 泳道圖

@startuml
!theme plain
skinparam swimlaneWidth 200

|學徒|
start
:遇到問題/困惑;
:整理想法;
:輸入問題訊息;

|系統|
:顯示學徒訊息在右側;
:提供視角切換按鈕;

|學徒|
:點擊視角切換按鈕;

|系統|
:開始10秒倒數;
:畫面模糊效果;
:顯示"切換至導師視角"提示;
note right: 使用者可選擇跳過倒數
:完成視角切換;
:調整訊息顯示位置\n(學徒訊息移至左側);

|導師|
:以第三者角度思考;
:分析學徒的問題;
:輸入建議回應;

|系統|
:顯示導師訊息在右側;
:提供視角切換按鈕;

|導師|
if (需要繼續對話?) then (是)
  :點擊視角切換按鈕;
  
  |系統|
  :開始10秒倒數;
  :畫面模糊效果;
  :顯示"切換至學徒視角"提示;
  :完成視角切換;
  :調整訊息顯示位置\n(導師訊息移至左側);
  
  |學徒|
  :接收導師建議;
  :進一步提問或釐清;
else (完成對話)
  |系統|
  :對話結束;
endif

|系統|
:提供訊息編輯功能;
:提供訊息刪除功能;
:提供匯出功能\n(MD/TXT格式);
:儲存至Local Storage;

stop

@enduml

## User Story

以下為針對「視角切換對話 Web App」所整理的一組使用者故事（User Stories），涵蓋核心功能與流程：

1. **US01 – 啟動對話**

   - **敘述**：作為一位學徒視角的使用者，我想在聊天介面輸入遇到的問題訊息，以便開始與系統及導師對話。
   - **理由**：使用者能快速將困惑記錄並獲得回饋。

2. **US02 – 學徒視角訊息呈現**

   - **敘述**：作為學徒視角的使用者，我想看到自己的訊息顯示在右側、導師的訊息顯示在左側，以便直觀分辨雙方角色。
   - **理由**：區分訊息來源，降低認知負擔。

3. **US03 – 切換至導師視角**

   - **敘述**：作為使用者，我想點擊「切換視角」按鈕，觸發１０秒倒數、畫面模糊及提示文字，以便做好心理準備，進入導師思考模式。
   - **理由**：透過刻意緩衝，避免隨興回應，增進第三者視角思考品質。

4. **US04 – 跳過倒數**

   - **敘述**：作為使用者，我想在倒數過程中能一鍵跳過倒數，以便在想要快速切換時不受等待限制。
   - **理由**：兼顧深度思考與流暢使用體驗。

5. **US05 – 導師視角訊息呈現**

   - **敘述**：作為導師視角的使用者，我想看到自己的建議訊息顯示在右側、學徒訊息顯示在左側，以便自然地以第三者身分提供回應。
   - **理由**：強化角色代入感，幫助使用者跳脫當事者盲點。

6. **US06 – 持續雙向切換**

   - **敘述**：作為使用者，我想在學徒與導師視角間無限次切換，以便反覆檢視問題、修正思路並延續對話。
   - **理由**：支持多輪思考、深化問題分析與解決。

7. **US07 – 訊息編輯與刪除**

   - **敘述**：作為使用者，我想對任何已發送的訊息進行編輯或刪除，以便修正錯誤或移除不必要的內容。
   - **理由**：確保對話內容的精準與完整。

8. **US08 – 匯出對話**

   - **敘述**：作為使用者，我想將整段對話匯出為 Markdown 或純文字檔，以便後續整理與分享。
   - **理由**：方便做筆記、回顧或與他人討論。

9. **US09 – 本機儲存**
   - **敘述**：作為使用者，我希望系統自動將對話記錄儲存到 Local Storage，以便在關閉或重新開啟網頁後，能繼續未完成的對話。
   - **理由**：避免資料遺失，提升使用連續性。
